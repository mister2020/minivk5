{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"alignY\", \"alignX\", \"closing\", \"hasMask\", \"fixed\", \"children\", \"onClick\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS } from \"../../lib/platform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { useDOM } from \"../../lib/dom\";\nexport var PopoutWrapper = function PopoutWrapper(_ref) {\n  var _ref$alignY = _ref.alignY,\n      alignY = _ref$alignY === void 0 ? 'center' : _ref$alignY,\n      _ref$alignX = _ref.alignX,\n      alignX = _ref$alignX === void 0 ? 'center' : _ref$alignX,\n      _ref$closing = _ref.closing,\n      closing = _ref$closing === void 0 ? false : _ref$closing,\n      _ref$hasMask = _ref.hasMask,\n      hasMask = _ref$hasMask === void 0 ? true : _ref$hasMask,\n      _ref$fixed = _ref.fixed,\n      fixed = _ref$fixed === void 0 ? true : _ref$fixed,\n      children = _ref.children,\n      onClick = _ref.onClick,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n\n  var _React$useState = React.useState(!hasMask),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      opened = _React$useState2[0],\n      setOpened = _React$useState2[1];\n\n  var elRef = React.useRef();\n\n  var onFadeInEnd = function onFadeInEnd(e) {\n    if (!e || e.animationName === 'vkui-animation-full-fade-in') {\n      setOpened(true);\n    }\n  };\n\n  var animationFinishFallback = useTimeout(onFadeInEnd, platform === IOS ? 300 : 200);\n  React.useEffect(function () {\n    !opened && animationFinishFallback.set();\n  }, []);\n\n  var _useDOM = useDOM(),\n      window = _useDOM.window;\n\n  useGlobalEventListener(window, 'touchmove', function (e) {\n    return e.preventDefault();\n  }, {\n    passive: false\n  });\n  var baseClassNames = getClassName('PopoutWrapper', platform);\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(baseClassNames, \"PopoutWrapper--v-\".concat(alignY), \"PopoutWrapper--h-\".concat(alignX), {\n      'PopoutWrapper--closing': closing,\n      'PopoutWrapper--opened': opened,\n      'PopoutWrapper--fixed': fixed,\n      'PopoutWrapper--masked': hasMask\n    }),\n    onAnimationEnd: opened ? null : onFadeInEnd,\n    ref: elRef\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"PopoutWrapper__container\"\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"PopoutWrapper__overlay\",\n    onClick: onClick\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"PopoutWrapper__content\"\n  }, children)));\n};","map":{"version":3,"sources":["../../../src/components/PopoutWrapper/PopoutWrapper.tsx"],"names":["PopoutWrapper","alignY","alignX","closing","hasMask","fixed","children","onClick","restProps","platform","usePlatform","opened","setOpened","React","elRef","onFadeInEnd","e","animationFinishFallback","useTimeout","window","useDOM","useGlobalEventListener","passive","baseClassNames","getClassName","classNames"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { IOS } from '../../lib/platform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { useDOM } from '../../lib/dom';\nimport './PopoutWrapper.css';\n\nexport interface PopoutWrapperProps extends React.HTMLAttributes<HTMLDivElement> {\n  hasMask?: boolean;\n  fixed?: boolean;\n  alignY?: 'top' | 'center' | 'bottom';\n  alignX?: 'left' | 'center' | 'right';\n  closing?: boolean;\n}\n\nexport const PopoutWrapper: React.FC<PopoutWrapperProps> = ({\n  alignY = 'center',\n  alignX = 'center',\n  closing = false,\n  hasMask = true,\n  fixed = true,\n  children,\n  onClick,\n  ...restProps\n}) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(!hasMask);\n  const elRef = React.useRef<HTMLDivElement>();\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === 'vkui-animation-full-fade-in') {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(onFadeInEnd, platform === IOS ? 300 : 200);\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, []);\n\n  const { window } = useDOM();\n  useGlobalEventListener(window, 'touchmove', (e) => e.preventDefault(), { passive: false });\n\n  const baseClassNames = getClassName('PopoutWrapper', platform);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(baseClassNames, `PopoutWrapper--v-${alignY}`, `PopoutWrapper--h-${alignX}`, {\n        'PopoutWrapper--closing': closing,\n        'PopoutWrapper--opened': opened,\n        'PopoutWrapper--fixed': fixed,\n        'PopoutWrapper--masked': hasMask,\n      })}\n      onAnimationEnd={opened ? null : onFadeInEnd}\n      ref={elRef}\n    >\n      <div vkuiClass=\"PopoutWrapper__container\">\n        <div\n          vkuiClass=\"PopoutWrapper__overlay\"\n          onClick={onClick} />\n        <div vkuiClass=\"PopoutWrapper__content\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}