{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"alt\", \"crossOrigin\", \"decoding\", \"height\", \"loading\", \"referrerPolicy\", \"sizes\", \"src\", \"srcSet\", \"useMap\", \"width\", \"getRef\", \"size\", \"shadow\", \"mode\", \"className\", \"children\", \"getRootRef\", \"style\", \"aria-label\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\n\nvar Avatar = function Avatar(_ref) {\n  var alt = _ref.alt,\n      crossOrigin = _ref.crossOrigin,\n      decoding = _ref.decoding,\n      height = _ref.height,\n      loading = _ref.loading,\n      referrerPolicy = _ref.referrerPolicy,\n      sizes = _ref.sizes,\n      src = _ref.src,\n      srcSet = _ref.srcSet,\n      useMap = _ref.useMap,\n      width = _ref.width,\n      getRef = _ref.getRef,\n      size = _ref.size,\n      shadow = _ref.shadow,\n      mode = _ref.mode,\n      className = _ref.className,\n      children = _ref.children,\n      getRootRef = _ref.getRootRef,\n      style = _ref.style,\n      ariaLabel = _ref['aria-label'],\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      failedImage = _React$useState2[0],\n      setFailedImage = _React$useState2[1];\n\n  var onImageError = function onImageError() {\n    setFailedImage(true);\n  };\n\n  var onImageLoad = function onImageLoad() {\n    setFailedImage(false);\n  };\n\n  var borderRadius = '50%';\n\n  switch (mode) {\n    case 'image':\n      size < 64 && (borderRadius = 4);\n      size >= 64 && size < 96 && (borderRadius = 6);\n      size >= 96 && (borderRadius = 8);\n      break;\n\n    case 'app':\n      size <= 40 && (borderRadius = 8);\n      size > 40 && size < 56 && (borderRadius = 10);\n      size >= 56 && size < 64 && (borderRadius = 12);\n      size >= 64 && size < 84 && (borderRadius = 16);\n      size >= 84 && (borderRadius = 18);\n      break;\n\n    default:\n      break;\n  }\n\n  var hasSrc = src || srcSet;\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(getClassName('Avatar', platform), \"Avatar--type-\".concat(mode), \"Avatar--sz-\".concat(size), {\n      'Avatar--shadow': shadow,\n      'Avatar--failed': failedImage\n    }),\n    className: className,\n    ref: getRootRef,\n    role: hasSrc ? 'img' : 'presentation',\n    \"aria-label\": alt || ariaLabel,\n    style: _objectSpread(_objectSpread({}, style), {}, {\n      width: size,\n      height: size,\n      borderRadius: borderRadius\n    })\n  }), hasSrc && createScopedElement(\"img\", {\n    crossOrigin: crossOrigin,\n    decoding: decoding,\n    height: height,\n    loading: loading,\n    referrerPolicy: referrerPolicy,\n    sizes: sizes,\n    src: src,\n    srcSet: srcSet,\n    useMap: useMap,\n    width: width,\n    ref: getRef,\n    onError: onImageError,\n    onLoad: onImageLoad,\n    vkuiClass: \"Avatar__img\",\n    alt: \"\"\n  }), children && createScopedElement(\"div\", {\n    vkuiClass: \"Avatar__children\"\n  }, children));\n};\n\nAvatar.defaultProps = {\n  size: 48,\n  mode: 'default',\n  shadow: true\n};\nexport default Avatar;","map":{"version":3,"sources":["../../../src/components/Avatar/Avatar.tsx"],"names":["Avatar","alt","crossOrigin","decoding","height","loading","referrerPolicy","sizes","src","srcSet","useMap","width","getRef","size","shadow","mode","className","children","getRootRef","style","ariaLabel","restProps","platform","usePlatform","failedImage","setFailedImage","React","onImageError","onImageLoad","borderRadius","hasSrc","classNames","getClassName"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { HasRef, HasRootRef } from '../../types';\nimport './Avatar.css';\n\nexport interface AvatarProps extends React.ImgHTMLAttributes<HTMLElement>, HasRootRef<HTMLDivElement>, HasRef<HTMLImageElement> {\n  /**\n   * Рекомендуемый сет значений: 96 | 88 | 80 | 72 | 64 | 56 | 48 | 44 | 40 | 36 | 32 | 28 | 24\n   */\n  size?: number;\n  mode?: 'default' | 'image' | 'app';\n  shadow?: boolean;\n}\n\nconst Avatar: React.FC<AvatarProps> = ({\n  alt,\n  crossOrigin,\n  decoding,\n  height,\n  loading,\n  referrerPolicy,\n  sizes,\n  src,\n  srcSet,\n  useMap,\n  width,\n  getRef,\n  size,\n  shadow,\n  mode,\n  className,\n  children,\n  getRootRef,\n  style,\n  'aria-label': ariaLabel,\n  ...restProps\n}: AvatarProps) => {\n  const platform = usePlatform();\n  const [failedImage, setFailedImage] = React.useState(false);\n\n  const onImageError = () => {\n    setFailedImage(true);\n  };\n\n  const onImageLoad = () => {\n    setFailedImage(false);\n  };\n\n  let borderRadius: string | number = '50%';\n\n  switch (mode) {\n    case 'image':\n      size < 64 && (borderRadius = 4);\n      size >= 64 && size < 96 && (borderRadius = 6);\n      size >= 96 && (borderRadius = 8);\n      break;\n    case 'app':\n      size <= 40 && (borderRadius = 8);\n      size > 40 && size < 56 && (borderRadius = 10);\n      size >= 56 && size < 64 && (borderRadius = 12);\n      size >= 64 && size < 84 && (borderRadius = 16);\n      size >= 84 && (borderRadius = 18);\n      break;\n    default:\n      break;\n  }\n\n  const hasSrc = src || srcSet;\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(getClassName('Avatar', platform), `Avatar--type-${mode}`, `Avatar--sz-${size}`, {\n        'Avatar--shadow': shadow,\n        'Avatar--failed': failedImage,\n      })}\n      className={className}\n      ref={getRootRef}\n      role={hasSrc ? 'img' : 'presentation'}\n      aria-label={alt || ariaLabel}\n      style={{ ...style, width: size, height: size, borderRadius }}\n    >\n      {hasSrc &&\n        <img\n          crossOrigin={crossOrigin}\n          decoding={decoding}\n          height={height}\n          loading={loading}\n          referrerPolicy={referrerPolicy}\n          sizes={sizes}\n          src={src}\n          srcSet={srcSet}\n          useMap={useMap}\n          width={width}\n          ref={getRef}\n          onError={onImageError}\n          onLoad={onImageLoad}\n          vkuiClass=\"Avatar__img\"\n          alt=\"\"\n        />\n      }\n      {children && <div vkuiClass=\"Avatar__children\">{children}</div>}\n    </div>\n  );\n};\n\nAvatar.defaultProps = {\n  size: 48,\n  mode: 'default',\n  shadow: true,\n};\n\nexport default Avatar;\n"]},"metadata":{},"sourceType":"module"}