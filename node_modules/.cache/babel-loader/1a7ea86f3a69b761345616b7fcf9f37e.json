{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"activeStory\", \"tabbar\", \"children\", \"viewWidth\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport { ScrollSaver } from \"./ScrollSaver\";\nimport { getNavId } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nvar warn = warnOnce('Epic');\nexport var Epic = function Epic(props) {\n  var platform = usePlatform();\n  var scroll = React.useRef({}).current;\n\n  var activeStory = props.activeStory,\n      tabbar = props.tabbar,\n      children = props.children,\n      viewWidth = props.viewWidth,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  if (process.env.NODE_ENV === 'development' && !tabbar && viewWidth < ViewWidth.SMALL_TABLET) {\n    warn('Using Epic without tabbar is not recommended on mobile');\n  }\n\n  var story = React.Children.toArray(children).find(function (story) {\n    return getNavId(story.props, warn) === activeStory;\n  }) || null;\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: getClassName('Epic', platform)\n  }), createScopedElement(ScrollSaver, {\n    key: activeStory,\n    initialScroll: scroll[activeStory] || 0,\n    saveScroll: function saveScroll(value) {\n      return scroll[activeStory] = value;\n    }\n  }, story), tabbar);\n};\nexport default withAdaptivity(Epic, {\n  viewWidth: true\n});","map":{"version":3,"sources":["../../../src/components/Epic/Epic.tsx"],"names":["warn","warnOnce","Epic","platform","usePlatform","scroll","React","activeStory","tabbar","children","viewWidth","restProps","props","process","ViewWidth","story","getNavId","getClassName","withAdaptivity"],"mappings":";;;;AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;AACA,SAAA,YAAA,QAAA,4BAAA;AACA,SAAA,WAAA,QAAA,yBAAA;AACA,SAAA,cAAA,EAAA,SAAA,QAAA,0BAAA;AACA,SAAA,WAAA,QAAA,eAAA;AACA,SAAA,QAAA,QAAA,oBAAA;AACA,SAAA,QAAA,QAAA,oBAAA;AAQA,IAAMA,IAAI,GAAGC,QAAQ,CAArB,MAAqB,CAArB;AAEA,OAAO,IAAMC,IAAyB,GAAG,SAA5BA,IAA4B,CAAA,KAAA,EAAsB;AAC7D,MAAMC,QAAQ,GAAGC,WAAjB,EAAA;AACA,MAAMC,MAAM,GAAGC,KAAK,CAALA,MAAAA,CAAAA,EAAAA,EAAf,OAAA;;AACA,MAAQC,WAAR,GAAmEK,KAAnE,CAAA,WAAA;AAAA,MAAqBJ,MAArB,GAAmEI,KAAnE,CAAA,MAAA;AAAA,MAA6BH,QAA7B,GAAmEG,KAAnE,CAAA,QAAA;AAAA,MAAuCF,SAAvC,GAAmEE,KAAnE,CAAA,SAAA;AAAA,MAAqDD,SAArD,GAAA,wBAAA,CAAA,KAAA,EAAA,SAAA,CAAA;;AAEA,MAAIE,OAAO,CAAPA,GAAAA,CAAAA,QAAAA,KAAAA,aAAAA,IAA0C,CAA1CA,MAAAA,IAAqDH,SAAS,GAAGI,SAAS,CAA9E,YAAA,EAA6F;AAC3Fd,IAAAA,IAAI,CAAJA,wDAAI,CAAJA;AACD;;AACD,MAAMe,KAAK,GAAIT,KAAK,CAALA,QAAAA,CAAAA,OAAAA,CAAD,QAACA,EAAD,IAACA,CACP,UAAA,KAAA,EAAA;AAAA,WAAWU,QAAQ,CAACD,KAAK,CAAN,KAAA,EAARC,IAAQ,CAARA,KAAX,WAAA;AADM,GAACV,KAAf,IAAA;AAGA,SACE,mBAAA,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAA,SAAA,EAAA;AAAoB,IAAA,SAAS,EAAEW,YAAY,CAAA,MAAA,EAAA,QAAA;AAA3C,GAAA,CAAA,EACE,mBAAA,CAAA,WAAA,EAAA;AACE,IAAA,GAAG,EADL,WAAA;AAEE,IAAA,aAAa,EAAEZ,MAAM,CAANA,WAAM,CAANA,IAFjB,CAAA;AAGE,IAAA,UAAU,EAAE,SAAA,UAAA,CAAA,KAAA,EAAA;AAAA,aAAWA,MAAM,CAANA,WAAM,CAANA,GAAX,KAAA;AAAA;AAHd,GAAA,EADF,KACE,CADF,EADF,MACE,CADF;AAXK,CAAA;AAuBP,eAAea,cAAc,CAAA,IAAA,EAAO;AAClCR,EAAAA,SAAS,EAAE;AADuB,CAAP,CAA7B","sourcesContent":["import * as React from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { withAdaptivity, ViewWidth, AdaptivityProps } from '../../hoc/withAdaptivity';\nimport { ScrollSaver } from './ScrollSaver';\nimport { getNavId } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport './Epic.css';\n\nexport interface EpicProps extends React.HTMLAttributes<HTMLDivElement>, AdaptivityProps {\n  tabbar?: React.ReactNode;\n  activeStory: string;\n}\n\nconst warn = warnOnce('Epic');\n\nexport const Epic: React.FC<EpicProps> = (props: EpicProps) => {\n  const platform = usePlatform();\n  const scroll = React.useRef<{ [key: string]: number }>({}).current;\n  const { activeStory, tabbar, children, viewWidth, ...restProps } = props;\n\n  if (process.env.NODE_ENV === 'development' && !tabbar && viewWidth < ViewWidth.SMALL_TABLET) {\n    warn('Using Epic without tabbar is not recommended on mobile');\n  }\n  const story = (React.Children.toArray(children) as React.ReactElement[])\n    .find((story) => getNavId(story.props, warn) === activeStory) || null;\n\n  return (\n    <div {...restProps} vkuiClass={getClassName('Epic', platform)}>\n      <ScrollSaver\n        key={activeStory}\n        initialScroll={scroll[activeStory] || 0}\n        saveScroll={(value) => scroll[activeStory] = value}\n      >{story}</ScrollSaver>\n      {tabbar}\n    </div>\n  );\n};\n\nexport default withAdaptivity(Epic, {\n  viewWidth: true,\n});\n"]},"metadata":{},"sourceType":"module"}