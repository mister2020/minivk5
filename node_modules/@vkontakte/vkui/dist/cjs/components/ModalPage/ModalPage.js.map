{"version":3,"sources":["../../../../src/components/ModalPage/ModalPage.tsx"],"names":["warn","ModalPage","props","platform","React","useContext","ModalRootContext","updateModalHeight","children","header","viewWidth","viewHeight","sizeX","hasMouse","onClose","settlingHeight","dynamicContentHeight","getModalContentRef","nav","restProps","useEffect","isDesktop","ViewWidth","SMALL_TABLET","ViewHeight","MEDIUM","canShowCloseBtn","modalContext","ModalType","PAGE","refs","innerElement","headerElement","contentElement","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;;AAoBA,IAAMA,IAAI,GAAG,wBAAS,WAAT,CAAb;;AACA,IAAMC,SAAmC,GAAG,SAAtCA,SAAsC,CAACC,KAAD,EAA2B;AACrE,MAAMC,QAAQ,GAAG,+BAAjB;;AACA,0BAA8BC,KAAK,CAACC,UAAN,CAAiBC,kCAAjB,CAA9B;AAAA,MAAQC,iBAAR,qBAAQA,iBAAR;;AACA,MACEC,QADF,GAaIN,KAbJ,CACEM,QADF;AAAA,MAEEC,MAFF,GAaIP,KAbJ,CAEEO,MAFF;AAAA,MAGEC,SAHF,GAaIR,KAbJ,CAGEQ,SAHF;AAAA,MAIEC,UAJF,GAaIT,KAbJ,CAIES,UAJF;AAAA,MAKEC,KALF,GAaIV,KAbJ,CAKEU,KALF;AAAA,MAMEC,QANF,GAaIX,KAbJ,CAMEW,QANF;AAAA,MAOEC,OAPF,GAaIZ,KAbJ,CAOEY,OAPF;AAAA,MAQEC,cARF,GAaIb,KAbJ,CAQEa,cARF;AAAA,MASEC,oBATF,GAaId,KAbJ,CASEc,oBATF;AAAA,MAUEC,kBAVF,GAaIf,KAbJ,CAUEe,kBAVF;AAAA,MAWEC,GAXF,GAaIhB,KAbJ,CAWEgB,GAXF;AAAA,MAYKC,SAZL,0CAaIjB,KAbJ;AAeAE,EAAAA,KAAK,CAACgB,SAAN,CAAgB,YAAM;AACpBb,IAAAA,iBAAiB;AAClB,GAFD,EAEG,CAACC,QAAD,CAFH;AAIA,MAAMa,SAAS,GAAGX,SAAS,IAAIY,0BAAUC,YAAvB,KAAwCV,QAAQ,IAAIF,UAAU,IAAIa,2BAAWC,MAA7E,CAAlB;AACA,MAAMC,eAAe,GAAGhB,SAAS,IAAIY,0BAAUC,YAA/C;AAEA,MAAMI,YAAY,GAAGvB,KAAK,CAACC,UAAN,CAAiBC,kCAAjB,CAArB;;AACA,0BAAiB,wCAAiB,wBAASJ,KAAT,EAAgBF,IAAhB,CAAjB,EAAwC4B,iBAAUC,IAAlD,CAAjB;AAAA,MAAQC,IAAR,qBAAQA,IAAR;;AAEA,SACE,uEACMX,SADN;AAEE,IAAA,SAAS,EAAE,4BAAW,gCAAa,WAAb,EAA0BhB,QAA1B,CAAX,6BAAoES,KAApE,GAA6E;AACtF,4BAAsBS;AADgE,KAA7E;AAFb,MAME;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAoC,IAAA,GAAG,EAAES,IAAI,CAACC;AAA9C,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAmC,IAAA,GAAG,EAAED,IAAI,CAACE;AAA7C,KACGvB,MADH,CADF,EAKE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAoC,IAAA,GAAG,EAAE,qBAAyBqB,IAAI,CAACG,cAA9B,EAA8ChB,kBAA9C;AAAzC,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACGT,QADH,CADF,CADF,CALF,EAYGkB,eAAe,IAAI,qCAAC,2BAAD;AAAoB,IAAA,OAAO,EAAEZ,OAAO,IAAIa,YAAY,CAACb;AAArD,IAZtB,CADF,CANF,CADF;AAyBD,CArDD;;AAuDAb,SAAS,CAACiC,YAAV,GAAyB;AACvBnB,EAAAA,cAAc,EAAE;AADO,CAAzB;;eAIe,oCAAed,SAAf,EAA0B;AACvCS,EAAAA,SAAS,EAAE,IAD4B;AAEvCC,EAAAA,UAAU,EAAE,IAF2B;AAGvCC,EAAAA,KAAK,EAAE,IAHgC;AAIvCC,EAAAA,QAAQ,EAAE;AAJ6B,CAA1B,C","sourcesContent":["import * as React from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { ModalRootContext, useModalRegistry } from '../ModalRoot/ModalRootContext';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { withAdaptivity, AdaptivityProps, ViewHeight, ViewWidth } from '../../hoc/withAdaptivity';\nimport ModalDismissButton from '../ModalDismissButton/ModalDismissButton';\nimport { Ref } from '../../types';\nimport { multiRef } from '../../lib/utils';\nimport { ModalType } from '../ModalRoot/types';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport './ModalPage.css';\n\nexport interface ModalPageProps extends React.HTMLAttributes<HTMLDivElement>, AdaptivityProps, NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: React.ReactNode;\n  onClose?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: Ref<HTMLDivElement>;\n}\n\nconst warn = warnOnce('ModalPage');\nconst ModalPage: React.FC<ModalPageProps> = (props: ModalPageProps) => {\n  const platform = usePlatform();\n  const { updateModalHeight } = React.useContext(ModalRootContext);\n  const {\n    children,\n    header,\n    viewWidth,\n    viewHeight,\n    sizeX,\n    hasMouse,\n    onClose,\n    settlingHeight,\n    dynamicContentHeight,\n    getModalContentRef,\n    nav,\n    ...restProps\n  } = props;\n\n  React.useEffect(() => {\n    updateModalHeight();\n  }, [children]);\n\n  const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET && (hasMouse || viewHeight >= ViewHeight.MEDIUM);\n  const canShowCloseBtn = viewWidth >= ViewWidth.SMALL_TABLET;\n\n  const modalContext = React.useContext(ModalRootContext);\n  const { refs } = useModalRegistry(getNavId(props, warn), ModalType.PAGE);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(getClassName('ModalPage', platform), `ModalPage--sizeX-${sizeX}`, {\n        'ModalPage--desktop': isDesktop,\n      })}\n    >\n      <div vkuiClass=\"ModalPage__in-wrap\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalPage__in\">\n          <div vkuiClass=\"ModalPage__header\" ref={refs.headerElement}>\n            {header}\n          </div>\n\n          <div vkuiClass=\"ModalPage__content-wrap\">\n            <div vkuiClass=\"ModalPage__content\" ref={multiRef<HTMLDivElement>(refs.contentElement, getModalContentRef)}>\n              <div vkuiClass=\"ModalPage__content-in\">\n                {children}\n              </div>\n            </div>\n          </div>\n          {canShowCloseBtn && <ModalDismissButton onClick={onClose || modalContext.onClose} />}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nModalPage.defaultProps = {\n  settlingHeight: 75,\n};\n\nexport default withAdaptivity(ModalPage, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true,\n});\n"],"file":"ModalPage.js"}