{"version":3,"sources":["../../../src/components/UsersStack/UsersStack.tsx"],"names":["React","getClassName","useBrowserInfo","usePlatform","hasReactNode","classNames","System","useIsomorphicLayoutEffect","Caption","Subhead","createMasks","UsersStack","props","system","systemVersion","platform","photos","visibleCount","size","layout","children","restProps","othersCount","Math","max","length","canShowOthers","photosShown","slice","canUseClipPath","IOS","major","map","photo","i","backgroundImage","defaultProps","memo"],"mappings":";;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT;AACA,SAASC,cAAT;AACA,SAASC,WAAT;AACA,SAASC,YAAT;AACA,SAASC,UAAT;AACA,SAASC,MAAT;AACA,SAASC,yBAAT;AACA,OAAOC,OAAP;AACA,OAAOC,OAAP;AACA,SAASC,WAAT;;AAuBA,IAAMC,UAAqC,GAAG,SAAxCA,UAAwC,CAACC,KAAD,EAA4B;AACxE,wBAAkCV,cAAc,EAAhD;AAAA,MAAQW,MAAR,mBAAQA,MAAR;AAAA,MAAgBC,aAAhB,mBAAgBA,aAAhB;;AACA,MAAMC,QAAQ,GAAGZ,WAAW,EAA5B;;AACA,MAAQa,MAAR,GAAuEJ,KAAvE,CAAQI,MAAR;AAAA,MAAgBC,YAAhB,GAAuEL,KAAvE,CAAgBK,YAAhB;AAAA,MAA8BC,IAA9B,GAAuEN,KAAvE,CAA8BM,IAA9B;AAAA,MAAoCC,MAApC,GAAuEP,KAAvE,CAAoCO,MAApC;AAAA,MAA4CC,QAA5C,GAAuER,KAAvE,CAA4CQ,QAA5C;AAAA,MAAyDC,SAAzD,4BAAuET,KAAvE;;AAEAL,EAAAA,yBAAyB,CAAC,YAAM;AAC9BG,IAAAA,WAAW;AACZ,GAFwB,EAEtB,EAFsB,CAAzB;AAIA,MAAMY,WAAW,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYR,MAAM,CAACS,MAAP,GAAgBR,YAA5B,CAApB;AACA,MAAMS,aAAa,GAAGJ,WAAW,GAAG,CAAd,IAAmBJ,IAAI,KAAK,GAAlD;AAEA,MAAMS,WAAW,GAAGX,MAAM,CAACY,KAAP,CAAa,CAAb,EAAgBX,YAAhB,CAApB;AAEA,MAAIY,cAAc,GAAG,IAArB;;AACA,MAAIhB,MAAM,KAAKP,MAAM,CAACwB,GAAtB,EAA2B;AACzBD,IAAAA,cAAc,GAAGf,aAAa,IAAIA,aAAa,CAACiB,KAAd,IAAuB,EAAzD;AACD;;AAED,SACE,wCACMV,SADN;AAEE,IAAA,SAAS,EACPhB,UAAU,CACRJ,YAAY,CAAC,YAAD,EAAec,QAAf,CADJ,6BAEYG,IAFZ,2BAGSC,MAHT,GAIR;AACE,4BAAsBO,aADxB;AAEE,4BAAsB,CAACG;AAFzB,KAJQ;AAHd,MAcE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAoC,IAAA,IAAI,EAAC;AAAzC,KACGF,WAAW,CAACK,GAAZ,CAAgB,UAACC,KAAD,EAAQC,CAAR;AAAA,WACf;AACE,MAAA,GAAG,EAAEA,CADP;AAEE,MAAA,SAAS,EAAC,mBAFZ;AAGE,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,gBAASF,KAAT;AAAjB;AAHT,MADe;AAAA,GAAhB,CADH,EASGP,aAAa,IACZ,oBAAC,OAAD;AAAS,IAAA,MAAM,EAAC,QAAhB;AAAyB,IAAA,KAAK,EAAC,GAA/B;AAAmC,IAAA,SAAS,EAAC,6CAA7C;AAA2F,mBAAY;AAAvG,KACE,uCAAQJ,WAAR,CADF,CAVJ,CAdF,EA6BGlB,YAAY,CAACgB,QAAD,CAAZ,IAA0B,oBAAC,OAAD;AAAS,IAAA,SAAS,EAAC,MAAnB;AAA0B,IAAA,MAAM,EAAC,SAAjC;AAA2C,IAAA,SAAS,EAAC;AAArD,KAAyEA,QAAzE,CA7B7B,CADF;AAiCD,CApDD;;AAsDAT,UAAU,CAACyB,YAAX,GAA0B;AACxBpB,EAAAA,MAAM,EAAE,EADgB;AAExBE,EAAAA,IAAI,EAAE,GAFkB;AAGxBD,EAAAA,YAAY,EAAE,CAHU;AAIxBE,EAAAA,MAAM,EAAE;AAJgB,CAA1B;AAOA,4BAAenB,KAAK,CAACqC,IAAN,CAAW1B,UAAX,CAAf","sourcesContent":["import * as React from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { useBrowserInfo } from '../../hooks/useBrowserInfo';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { hasReactNode } from '../../lib/utils';\nimport { classNames } from '../../lib/classNames';\nimport { System } from '../../lib/browser';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport Caption from '../Typography/Caption/Caption';\nimport Subhead from '../Typography/Subhead/Subhead';\nimport { createMasks } from './masks';\nimport './UsersStack.css';\n\nexport interface UsersStackProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * Массив ссылок на фотографии\n   */\n  photos?: string[];\n  /**\n   * Размер аватарок\n   */\n  size?: 'xs' | 's' | 'm';\n  /**\n   * Вертикальный режим рекомендуется использовать с размером `m`\n   */\n  layout?: 'vertical' | 'horizontal';\n  /**\n   * Количество аватарок, которые будут показаны.\n   * Если в массиве `photos` больше элементов и используется размер `m`, то будет показано количество остальных элементов\n   */\n  visibleCount?: number;\n}\n\nconst UsersStack: React.FC<UsersStackProps> = (props: UsersStackProps) => {\n  const { system, systemVersion } = useBrowserInfo();\n  const platform = usePlatform();\n  const { photos, visibleCount, size, layout, children, ...restProps } = props;\n\n  useIsomorphicLayoutEffect(() => {\n    createMasks();\n  }, []);\n\n  const othersCount = Math.max(0, photos.length - visibleCount);\n  const canShowOthers = othersCount > 0 && size === 'm';\n\n  const photosShown = photos.slice(0, visibleCount);\n\n  let canUseClipPath = true;\n  if (system === System.IOS) {\n    canUseClipPath = systemVersion && systemVersion.major >= 12;\n  }\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={\n        classNames(\n          getClassName('UsersStack', platform),\n          `UsersStack--size-${size}`,\n          `UsersStack--l-${layout}`,\n          {\n            'UsersStack--others': canShowOthers,\n            'UsersStack--simple': !canUseClipPath,\n          },\n        )\n      }\n    >\n      <div vkuiClass=\"UsersStack__photos\" role=\"presentation\">\n        {photosShown.map((photo, i) => (\n          <div\n            key={i}\n            vkuiClass=\"UsersStack__photo\"\n            style={{ backgroundImage: `url(${photo})` }}\n          />\n        ))}\n\n        {canShowOthers &&\n          <Caption weight=\"medium\" level=\"1\" vkuiClass=\"UsersStack__photo UsersStack__photo--others\" aria-hidden=\"true\">\n            <span>+{othersCount}</span>\n          </Caption>\n        }\n      </div>\n      {hasReactNode(children) && <Subhead Component=\"span\" weight=\"regular\" vkuiClass=\"UsersStack__text\">{children}</Subhead>}\n    </div>\n  );\n};\n\nUsersStack.defaultProps = {\n  photos: [],\n  size: 's',\n  visibleCount: 3,\n  layout: 'horizontal',\n};\n\nexport default React.memo(UsersStack);\n"],"file":"UsersStack.js"}