{"version":3,"sources":["../../../src/components/Epic/Epic.tsx"],"names":["React","getClassName","usePlatform","withAdaptivity","ViewWidth","ScrollSaver","getNavId","warnOnce","warn","Epic","props","platform","scroll","useRef","current","activeStory","tabbar","children","viewWidth","restProps","process","env","NODE_ENV","SMALL_TABLET","story","Children","toArray","find","value"],"mappings":";;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT;AACA,SAASC,WAAT;AACA,SAASC,cAAT,EAAyBC,SAAzB;AACA,SAASC,WAAT;AACA,SAASC,QAAT;AACA,SAASC,QAAT;AAQA,IAAMC,IAAI,GAAGD,QAAQ,CAAC,MAAD,CAArB;AAEA,OAAO,IAAME,IAAyB,GAAG,SAA5BA,IAA4B,CAACC,KAAD,EAAsB;AAC7D,MAAMC,QAAQ,GAAGT,WAAW,EAA5B;AACA,MAAMU,MAAM,GAAGZ,KAAK,CAACa,MAAN,CAAwC,EAAxC,EAA4CC,OAA3D;;AACA,MAAQC,WAAR,GAAmEL,KAAnE,CAAQK,WAAR;AAAA,MAAqBC,MAArB,GAAmEN,KAAnE,CAAqBM,MAArB;AAAA,MAA6BC,QAA7B,GAAmEP,KAAnE,CAA6BO,QAA7B;AAAA,MAAuCC,SAAvC,GAAmER,KAAnE,CAAuCQ,SAAvC;AAAA,MAAqDC,SAArD,4BAAmET,KAAnE;;AAEA,MAAIU,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IAA0C,CAACN,MAA3C,IAAqDE,SAAS,GAAGd,SAAS,CAACmB,YAA/E,EAA6F;AAC3Ff,IAAAA,IAAI,CAAC,wDAAD,CAAJ;AACD;;AACD,MAAMgB,KAAK,GAAIxB,KAAK,CAACyB,QAAN,CAAeC,OAAf,CAAuBT,QAAvB,CAAD,CACXU,IADW,CACN,UAACH,KAAD;AAAA,WAAWlB,QAAQ,CAACkB,KAAK,CAACd,KAAP,EAAcF,IAAd,CAAR,KAAgCO,WAA3C;AAAA,GADM,KACqD,IADnE;AAGA,SACE,wCAASI,SAAT;AAAoB,IAAA,SAAS,EAAElB,YAAY,CAAC,MAAD,EAASU,QAAT;AAA3C,MACE,oBAAC,WAAD;AACE,IAAA,GAAG,EAAEI,WADP;AAEE,IAAA,aAAa,EAAEH,MAAM,CAACG,WAAD,CAAN,IAAuB,CAFxC;AAGE,IAAA,UAAU,EAAE,oBAACa,KAAD;AAAA,aAAWhB,MAAM,CAACG,WAAD,CAAN,GAAsBa,KAAjC;AAAA;AAHd,KAIEJ,KAJF,CADF,EAMGR,MANH,CADF;AAUD,CArBM;AAuBP,eAAeb,cAAc,CAACM,IAAD,EAAO;AAClCS,EAAAA,SAAS,EAAE;AADuB,CAAP,CAA7B","sourcesContent":["import * as React from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { withAdaptivity, ViewWidth, AdaptivityProps } from '../../hoc/withAdaptivity';\nimport { ScrollSaver } from './ScrollSaver';\nimport { getNavId } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport './Epic.css';\n\nexport interface EpicProps extends React.HTMLAttributes<HTMLDivElement>, AdaptivityProps {\n  tabbar?: React.ReactNode;\n  activeStory: string;\n}\n\nconst warn = warnOnce('Epic');\n\nexport const Epic: React.FC<EpicProps> = (props: EpicProps) => {\n  const platform = usePlatform();\n  const scroll = React.useRef<{ [key: string]: number }>({}).current;\n  const { activeStory, tabbar, children, viewWidth, ...restProps } = props;\n\n  if (process.env.NODE_ENV === 'development' && !tabbar && viewWidth < ViewWidth.SMALL_TABLET) {\n    warn('Using Epic without tabbar is not recommended on mobile');\n  }\n  const story = (React.Children.toArray(children) as React.ReactElement[])\n    .find((story) => getNavId(story.props, warn) === activeStory) || null;\n\n  return (\n    <div {...restProps} vkuiClass={getClassName('Epic', platform)}>\n      <ScrollSaver\n        key={activeStory}\n        initialScroll={scroll[activeStory] || 0}\n        saveScroll={(value) => scroll[activeStory] = value}\n      >{story}</ScrollSaver>\n      {tabbar}\n    </div>\n  );\n};\n\nexport default withAdaptivity(Epic, {\n  viewWidth: true,\n});\n"],"file":"Epic.js"}